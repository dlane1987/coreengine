function power_confirm(text){"use strict";return power.confirm(text)}window.power={settingsChanged:!1,onboardingTasks:power_onboarding.tasks,categoryChecklistToggleInit:function(){"use strict";jQuery('<p><span id="power-category-checklist-toggle" class="button">'+powerL10n.categoryChecklistToggle+"</span></p>").insertBefore("ul.categorychecklist"),jQuery(document).on("click.power.power_category_checklist_toggle","#power-category-checklist-toggle",power.categoryChecklistToggle)},categoryChecklistToggle:function(event){"use strict";var $this=jQuery(event.target),checkboxes=$this.parent().next().find(":checkbox");$this.data("clicked")?(checkboxes.removeAttr("checked"),$this.data("clicked",!1)):(checkboxes.attr("checked","checked"),$this.data("clicked",!0))},toggleSettingsInit:function(){"use strict";jQuery.each(power_toggles,function(k,v){var data={selector:v[0],showSelector:v[1],checkValue:v[2]};jQuery("div.power-metaboxes").on("change.power.power_toggle",v[0],data,power.toggleSettings),jQuery(v[0]).trigger("change.power_toggle",data)})},toggleSettings:function(event){"use strict";var $selector=jQuery(event.data.selector),$showSelector=jQuery(event.data.showSelector),checkValue=event.data.checkValue;jQuery.isArray(checkValue)&&-1<jQuery.inArray($selector.val(),checkValue)||"_unchecked"===checkValue&&$selector.is(":not(:checked)")||"_checked"===checkValue&&$selector.is(":checked")||"_unchecked"!==checkValue&&"_checked"!==checkValue&&$selector.val()===checkValue?jQuery($showSelector).slideDown("fast"):jQuery($showSelector).slideUp("fast")},updateCharacterCount:function(event){"use strict";jQuery("#"+event.target.id+"_chars").html(jQuery(event.target).val().length.toString())},layoutHighlighter:function(event){"use strict";jQuery('input[name="'+jQuery(event.target).attr("name")+'"]').parent("label").removeClass("selected"),jQuery(event.currentTarget).addClass("selected")},confirm:function(text){"use strict";return confirm(text)},attachUnsavedChangesListener:function(){"use strict";jQuery("div.power-metaboxes :input").change(function(){power.registerChange()}),window.onbeforeunload=function(){if(power.settingsChanged)return powerL10n.saveAlert},jQuery('div.power-metaboxes input[type="submit"]').click(function(){window.onbeforeunload=null})},registerChange:function(){"use strict";power.settingsChanged=!0},confirmUpgrade:function(){"use strict";return confirm(powerL10n.confirmUpgrade)},confirmReset:function(){"use strict";return confirm(powerL10n.confirmReset)},doOnboardingTask:function(task,step){task=task||"dependencies",step=step||0,-1!==jQuery.inArray(task,power.onboardingTasks)?(power.toggleOnboardingTaskStatus(task,"processing"),jQuery.ajax({data:{action:"power_do_onboarding_process",task:task,step:step,nonce:power_onboarding.nonce},type:"post",dataType:"json",url:ajaxurl,success:function(response){if(response.data.homepage_edit_link&&jQuery("#power-onboarding-edit-homepage").attr("href",response.data.homepage_edit_link),!0===response.data.complete)return power.toggleOnboardingTaskStatus(task,"done"),power.onboardingTasks.shift(),power.onboardingTasks.length?(power.toggleOnboardingTaskStatus(power.onboardingTasks[0],"processing"),void window.setTimeout(function(){power.doOnboardingTask(power.onboardingTasks[0],0)},2e3)):void power.completeOnboarding();power.toggleOnboardingTaskStatus(power.onboardingTasks[0],"processing"),window.setTimeout(function(){power.doOnboardingTask(response.data.task,response.data.next_step)},2e3)}})):power.completeOnboarding()},toggleOnboardingTaskStatus:function(task,status){if(-1!==jQuery.inArray(task,power.onboardingTasks)){var current_task=jQuery(".power-onboarding-task-"+task);switch(status){case"processing":current_task.addClass("power-onboarding-list-processing"),wp.a11y.speak(power_onboarding.l10n.a11y.step_started,"polite");break;case"done":current_task.addClass("power-onboarding-list-done").removeClass("power-onboarding-list-processing"),wp.a11y.speak(power_onboarding.l10n.a11y.step_completed,"polite")}}},completeOnboarding:function(){window.setTimeout(function(){jQuery(".power-onboarding-task-final").addClass("power-onboarding-list-done")},300),wp.a11y.speak(power_onboarding.l10n.a11y.onboarding_complete,"polite")},onboardingInstallPack:function(pack){pack&&jQuery.ajax({data:{action:"power_do_onboarding_pack_selection",pack:pack,nonce:power_onboarding.nonce},type:"post",dataType:"json",url:ajaxurl,success:function(response){response.data.tasks&&(power_onboarding.tasks=response.data.tasks,power.onboardingTasks=power_onboarding.tasks),$overlayCloseButton=jQuery("#js-modal-close"),$overlayCloseButton.length&&$overlayCloseButton.click(),jQuery(".power-onboarding-starter-packs").addClass("power-onboarding-area-hidden"),response.data.tasks.includes("dependencies")&&jQuery(".power-onboarding-task-dependencies").addClass("power-onboarding-area-visible").removeClass("power-onboarding-area-hidden"),(response.data.tasks.includes("content")||response.data.hasMenus)&&jQuery(".power-onboarding-task-content").addClass("power-onboarding-area-visible").removeClass("power-onboarding-area-hidden"),window.setTimeout(function(){power.doOnboardingTask(power.onboardingTasks[0],0)},500)}})},ready:function(){"use strict";power.categoryChecklistToggleInit(),power.toggleSettingsInit(),power.attachUnsavedChangesListener(),jQuery("#power_title, #power_description").on("keyup.power.power_character_count",power.updateCharacterCount),jQuery(".power-layout-selector").on("change.power.power_layout_selector","label",power.layoutHighlighter),jQuery(".power-js-confirm-upgrade").on("click.power.power_confirm_upgrade",power.confirmUpgrade),jQuery(".power-js-confirm-reset").on("click.power.power_confirm_reset",power.confirmReset),jQuery("#power-onboarding-start").on("click",function(event){jQuery(this).prop("disabled",!0).addClass("power-onboarding-button-disabled"),jQuery("#power-onboarding-settings-link").prop("disabled",!0).prop("tabindex","-1"),wp.a11y.speak(power_onboarding.l10n.a11y.onboarding_started,"polite"),power.doOnboardingTask(event.target.dataset.task,event.target.dataset.step)}),jQuery("body").on("click",".power-install-pack",function(event){jQuery(".power-install-pack").prop("disabled",!0),power.onboardingInstallPack(event.target.dataset.pack)}),jQuery(".power-onboarding-page-starter-packs .pack-image").keypress(function(event){13===event.which&&(jQuery(this).click(),event.preventDefault())})}},jQuery(power.ready);